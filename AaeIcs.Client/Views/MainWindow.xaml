<syncfusion:ChromelessWindow x:Class="AAEICS.Client.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:services="clr-namespace:AAEICS.Client.Services"
        xmlns:local="clr-namespace:AAEICS.Client"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        mc:Ignorable="d"
        Title="{Binding AppTitle}"
        
        Height="800" Width="1200"
        MinHeight="619" MinWidth="{Binding WindowMinWidth}"
        Style="{DynamicResource CustomChromelessWindowStyle}"
        
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        WindowStyle="None"
        
        TitleBarHeight="50"
        ShowIcon="False"
        SizeChanged="MainWindow_SizeChanged">
    <syncfusion:ChromelessWindow.TitleBarTemplate>
        <StaticResource ResourceKey="TitleBarTemplate"/>
    </syncfusion:ChromelessWindow.TitleBarTemplate>
    <syncfusion:ChromelessWindow.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
    </syncfusion:ChromelessWindow.Resources>
    <Grid Margin="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <ContentControl Grid.Column="0"
                        Template="{DynamicResource SideMenuTemplate}"
                        Content="{Binding}">
            <ContentControl.Style>
                <Style TargetType="ContentControl">
                    <Setter Property="Width" Value="{x:Static services:UIConfig.SideMenuWidth}" />
                    <Setter Property="MinWidth" Value="{x:Static services:UIConfig.SideMenuWidth}" />
                    <Setter Property="Visibility" Value="{Binding IsSideMenuVisible, Converter={StaticResource BooleanToVisibility}}"/>
                </Style>
            </ContentControl.Style>
        </ContentControl>

        <Button Grid.Column="0" 
                Command="{Binding ShowFlyoutMenuCommand}"
                VerticalAlignment="Top">
            <Button.Style>
                <Style TargetType="Button" BasedOn="{StaticResource HamburgerMenuButtonStyle}">
                    <Setter Property="Tag" Value="{DynamicResource Icon.Hamburger}" />
                    <Setter Property="HorizontalAlignment" Value="Center" />
                    <Setter Property="VerticalAlignment" Value="Top" />
                    <Setter Property="Margin" Value="10,0,10,0" />
                    <Setter Property="Height" Value="45" />
                    <Setter Property="Width" Value="45" />
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSideMenuVisible}" Value="False">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
        
        <Grid Grid.Column="0" Grid.ColumnSpan="2" 
              Panel.ZIndex="100"
              HorizontalAlignment="Left">
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="Visibility" Value="{Binding IsFlyoutMenuVisible, Converter={StaticResource BooleanToVisibility}}"/>
                </Style>
            </Grid.Style>

            <Border Background="Transparent"
                    Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}">
                <Border.InputBindings>
                    <MouseBinding MouseAction="LeftClick" Command="{Binding CloseFlyoutMenuCommand}" />
                </Border.InputBindings>
            </Border>

            <ContentControl Content="{Binding}"
                            ContentTemplate="{DynamicResource FlyoutMenuTemplate}">
                <ContentControl.Style>
                    <Style TargetType="ContentControl">
                        <Setter Property="HorizontalAlignment" Value="Left"/>
                        <Setter Property="Width" Value="200" />
                    </Style>
                </ContentControl.Style>
            </ContentControl>
        </Grid>
        
        <Border Grid.Column="1"
                Background="{DynamicResource WindowMainFrameBackgroundBrush}"
                CornerRadius="8,8,10,8">
            <Grid Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <ContentControl Grid.Row="0"
                                Template="{DynamicResource NavBar}"
                                Margin="10"/>
            
                <Frame Grid.Row="1" x:Name="MainFrame" NavigationUIVisibility="Hidden" Margin="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
            </Grid>
        </Border>
    </Grid>
</syncfusion:ChromelessWindow>